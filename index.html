<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<link href="assets/favicon.png" rel="icon" type="image/png">
		<title>MLBIS Dumper</title>
		<style>
			@font-face {
				font-family: 'Red Hat Mono';
				src: url('./assets/redhat-mono.ttf');
			}

			@font-face {
				font-family: 'Red Hat Text';
				src: url('./assets/redhat-text.ttf');
			}

			:root {
				--button-fg: hsl(204, 100%, 50%);
				--button-bg: hsl(204, 100%, 5%);
				--button-fg-hover: hsl(204, 100%, 75%);

				--dropdown-fg: hsl(247, 100%, 70%);
				--dropdown-bg: hsl(247, 100%, 7%);
				--dropdown-fg-hover: hsl(247, 100%, 85%);
				--dropdown-opt-fg: hsl(247, 20%, 60%);
				--dropdown-opt-bg: hsl(247, 20%, 7%);
				--dropdown-opt-fg-hover: hsl(247, 20%, 80%);

				--checkbox-fg: hsl(150, 100%, 60%);
				--checkbox-bg: hsl(150, 100%, 6%);
				--checkbox-fg-hover: hsl(150, 100%, 80%);
				--checkbox-not-fg: hsl(150, 100%, 30%);
				--checkbox-not-fg-hover: hsl(150, 100%, 60%);

				/* for code highlighting only; https://catppuccin.com/palette/ we use the 'mocha' variant */
				--mauve: #cba6f7;
				--red: #f38ba8;
				--maroon: #eba0ac;
				--peach: #fab387;
				--yellow: #f9e2af;
				--green: #a6e3a1;
				--teal: #94e2d5;
				--sky: #89dceb;
				--sapphire: #74c7ec;
				--blue: #89b4fa;
				--lavender: #b4befe;
				--subtext0: #a6adc8;
				--overlay2: #9399b2;
			}

			* { box-sizing: border-box; margin: 0; }
			body { background: #11111b; color: #999; font-family: 'Red Hat Text'; overflow-x: hidden; }

			#title {
				left: 50vw; line-height: 2; position: absolute; text-align: center; top: 50vh;
				transform: translate(-50%, -50%);
			}

			canvas { display: block; image-rendering: pixelated; }

			section { border-bottom: 1px solid #666; position: relative; width: 100vw; }
			section .reveal { line-height: 32px; user-select: none; padding: 0 5px; }
			section .reveal:hover { color: #ccc; }
			section .content { width: calc(100% - 32px); padding: 20px; padding-left: 52px; }

			label { padding: 0 5px; user-select: none; }

			code { font-family: 'Red Hat Mono'; }

			button {
				background: var(--button-bg); border: 1px solid var(--button-fg); color: var(--button-fg);
				display: inline-block; font: inherit; font-size: 0.9rem; height: 1.4em; line-height: 1.4em;
				margin: 0 1px; max-height: unset; min-width: 1.4em; padding: 0 0.5em;
			}
			button:hover { color: #9cf; }

			.dropdown * { user-select: none; }
			.dropdown .left:hover, .dropdown .selection:hover, .dropdown .right:hover {
				color: var(--dropdown-fg-hover);
			}
			.dropdown:has(.selection:hover) .vee { color: var(--dropdown-fg-hover); }
			.dropdown .option:hover { color: var(--dropdown-opt-fg-hover); }

			.checkbox { border: 1px solid var(--checkbox-not-fg); user-select: none; }
			.checkbox * { color: var(--checkbox-not-fg); }
			.checkbox .check { opacity: 0; }
			.checkbox:hover * { color: var(--checkbox-not-fg-hover); }
			.checkbox:not(.checked):hover .check { opacity: 0.2; }
			.checkbox.checked { border-color: var(--checkbox-fg); }
			.checkbox.checked .check { opacity: 1; }
			.checkbox.checked * { color: var(--checkbox-fg); }
			.checkbox.checked:hover * { color: var(--checkbox-fg-hover); }

			table.bordered { border-collapse: collapse; }
			table.bordered td, table.bordered th { border: 1px solid #666; padding: 5px; }

			summary { cursor: default; }
			summary:hover { color: #ccc; }
		</style>
	</head>
	<body>
		<div id="title">
			<div>Use any Mario and Luigi: Bowser's Inside Story ROM (JP/NA/EU/KO, or NA/EU Demos)</div>
			<label for="file-input">
				<button onmousedown="document.getElementById('file-input').click()" style="height: 1em; padding: 20px; line-height: calc(1em - 40px);">Choose File</button>
			</label>
			<input id="file-input" style="display: none;" type="file" accept=".nds" />
			<div>Source Code: <a href="https://github.com/8y8x/mlbis-dumper" style="color: #76f;">GitHub</a></div>
			<div id="loaded">0 modules loaded</div>
		</div>

		<template id="dropdown">
			<div class="dropdown" style="display: inline-block; background: #121122; border: 1px solid #76f;
			color: #76f; font-size: 0.9rem; height: 1.4em; line-height: 1.4em; width: fit-content; text-wrap: nowrap;
			position: relative; margin: 0 1px;"><!--
				--><span class="left" style="display: inline-block; text-align: center; width: 1.5em">
					<svg viewbox="0 0 16 16" style="width: 1.4em; height: 1.4em; vertical-align: bottom">
						<path stroke="currentColor" stroke-width="1" fill="none" d="M10,5 L7,8 L10,11"></path>
					</svg>
				</span><!--
				--><span class="selection" style="display: inline-block; padding: 0 0.5em"></span><!--
				--><span class="vee" style=" display: none; text-align: center; width: 1.5em; position: absolute;
				right: 0; pointer-events: none;">
					<svg viewbox="0 0 8 16" style="height: 1.4em; vertical-align: bottom">
						<path stroke="currentColor" stroke-width="1" fill="none" d="M1,7 L4,10 L7,7"></path>
					</svg>
				</span><!--
				--><span class="right" style="display: inline-block; text-align: center; width: 1.5em">
					<svg viewbox="0 0 16 16" style="width: 1.4em; height: 1.4em; vertical-align: bottom">
						<path stroke="currentColor" stroke-width="1" fill="none" d="M8,5 L11,8 L8,11"></path>
					</svg>
				</span><!--

				--><div class="options" style="background: #17161f; border: 1px solid #76f; color: #99b;
				visibility: hidden; position: absolute; top: 1.4em; left: -1px; padding: 0 2em; max-height: 100vh;
				width: fit-content; overflow-y: auto; overscroll-behavior: none; z-index: 10;"></div><!--
				--><div class="option" style="height: 1.4em; line-height: 1.4em"></div><!--
			--></div>
		</template>

		<template id="checkbox">
			<div class="checkbox" style="background: #121; display: inline-block; font-size: 0.9rem; height: 1.4em;
			line-height: 1.4em; text-wrap: nowrap; padding: 0 0.5em 0 0.25em; margin: 0 1px;"><!--
				--><span class="check" style="display: inline-block; aspect-ratio: 1; height: 100%">
					<svg viewbox="0 0 15 16" style="width: 100%; height: 100%; vertical-align: bottom">
						<path stroke="currentColor" stroke-width="1" fill="none" d="M3,8 L6,11 L12,5"></path>
					</svg>
				</span><!--
				--><span class="label" style="display: inline-block"></span><!--
			--></div>
		</template>

		<script src="index.js"></script>
		<script src="algorithms.js"></script>
		<script src="disassembler.js"></script>
		<script src="field.js"></script>
	</body>
</html>
